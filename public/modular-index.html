<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    
    <!-- CSS —Ñ–∞–π–ª—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ -->
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/buttons.css">
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/cards.css">
    <link rel="stylesheet" href="/css/modals.css">
    <link rel="stylesheet" href="/css/utilities.css">
</head>
<body>
    <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                üìã Task Manager
            </div>
        </div>
        
        <nav class="nav-menu">
            <button class="nav-item active" data-page="dashboard">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
                –î–∞—à–±–æ—Ä–¥
            </button>
            
            <button class="nav-item" data-page="tasks">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
                –ó–∞–¥–∞—á–∏
            </button>
            
            <button class="nav-item" data-page="analytics">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M22,21H2V3H4V19H6V17H10V19H12V16H16V19H18V17H22V21Z"/>
                </svg>
                –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
            </button>
            
            <button class="nav-item" data-page="users">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16,4C18.11,4 19.99,5.89 19.99,8C19.99,10.11 18.11,12 16,12C13.89,12 12,10.11 12,8C12,5.89 13.89,4 16,4M16,14C20.42,14 24,15.79 24,18V20H8V18C8,15.79 11.58,14 16,14Z"/>
                </svg>
                –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
            </button>
            
            <button class="nav-item" data-page="settings">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.97 19.05,5.05L16.56,6.05C16.04,5.65 15.48,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.52,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.52,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.48,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.04 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                </svg>
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </button>
        </nav>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-content">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="header">
            <h1 class="page-title">–î–∞—à–±–æ—Ä–¥</h1>
            <div class="header-actions">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div class="user-details">
                        <div class="user-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                        <div class="user-role">admin</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü -->
        <div class="content">
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –î–∞—à–±–æ—Ä–¥ -->
            <div id="dashboardPage" class="page active">
                <div class="cards-grid cards-grid-4 mb-5">
                    <div class="stat-card">
                        <div class="stat-number" id="totalTasks">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingTasks">0</div>
                        <div class="stat-label">–í –æ–∂–∏–¥–∞–Ω–∏–∏</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="activeTasks">0</div>
                        <div class="stat-label">–í —Ä–∞–±–æ—Ç–µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completedTasks">0</div>
                        <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏</h2>
                        <button class="btn btn-primary" onclick="App.navigateTo('tasks')">
                            –í—Å–µ –∑–∞–¥–∞—á–∏
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="recentTasksList">
                            <p class="text-light">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ó–∞–¥–∞—á–∏ -->
            <div id="tasksPage" class="page">
                <div class="d-flex justify-between align-center mb-4">
                    <div class="filter-tabs">
                        <button class="tab active" data-filter="all">–í—Å–µ</button>
                        <button class="tab" data-filter="pending">–û–∂–∏–¥–∞—é—Ç</button>
                        <button class="tab" data-filter="in_progress">–í —Ä–∞–±–æ—Ç–µ</button>
                        <button class="tab" data-filter="review">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</button>
                        <button class="tab" data-filter="completed">–ó–∞–≤–µ—Ä—à–µ–Ω—ã</button>
                    </div>
                    <button id="createTaskBtn" class="btn btn-primary">
                        –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>

                <div class="card">
                    <div class="card-body p-0">
                        <div id="tasksList">
                            <p class="text-center p-5 text-light">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
            <div id="analyticsPage" class="page">
                <div class="card mb-4">
                    <div class="card-header">
                        <h2 class="card-title">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    </div>
                    <div class="card-body">
                        <div id="detailedStats">
                            <p class="text-light">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
                    </div>
                    <div class="card-body">
                        <div id="performanceMetrics">
                            <p class="text-light">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
            <div id="usersPage" class="page">
                <div class="d-flex justify-between align-center mb-4">
                    <div class="form-search w-50">
                        <input type="text" 
                               class="form-input" 
                               placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..."
                               onkeyup="UsersModule.searchUsers(this.value)">
                    </div>
                    <div class="d-flex gap-3">
                        <button id="refreshUsersBtn" class="btn btn-secondary">
                            –û–±–Ω–æ–≤–∏—Ç—å –∏–∑ Telegram
                        </button>
                        <button id="addUserBtn" class="btn btn-primary">
                            –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        </button>
                    </div>
                </div>

                <div id="usersList">
                    <p class="text-center p-5 text-light">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</p>
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="settingsPage" class="page">
                <div class="cards-grid cards-grid-2">
                    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Telegram Bot</h2>
                            <span id="botStatus" class="text-light">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</span>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">–¢–æ–∫–µ–Ω –±–æ—Ç–∞</label>
                                <input type="password" 
                                       id="botToken" 
                                       class="form-input" 
                                       placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –æ—Ç @BotFather">
                                <div class="form-feedback">
                                    <small class="text-light">
                                        –§–æ—Ä–º–∞—Ç: 123456789:ABCdefGHI-JKLmnoPQR_sTUv
                                    </small>
                                </div>
                            </div>
                            
                            <div class="d-flex gap-2 mb-3">
                                <button id="saveBotTokenBtn" class="btn btn-secondary btn-sm">
                                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω
                                </button>
                                <button id="connectBotBtn" class="btn btn-success btn-sm">
                                    –ü–æ–¥–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞
                                </button>
                            </div>
                            
                            <div id="botInfo" class="mt-3">
                                <div class="bot-disconnected-card">
                                    <div class="d-flex align-center gap-2 mb-2">
                                        <span class="text-warning">‚ö†Ô∏è</span>
                                        <strong>–ë–æ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</strong>
                                    </div>
                                    <p class="text-light mb-2">–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Telegram –±–æ—Ç–∞</p>
                                    <div class="bot-setup-steps">
                                        <p class="text-light mb-2">–®–∞–≥–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</p>
                                        <ol class="text-light">
                                            <li>–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –æ—Ç @BotFather</li>
                                            <li>–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø–æ–ª–µ –≤—ã—à–µ</li>
                                            <li>–ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞"</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞ -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">–†–∞–±–æ—á–∏–π —á–∞—Ç</h2>
                            <span id="chatStatus" class="text-light">–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</span>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">ID —Ä–∞–±–æ—á–µ–≥–æ —á–∞—Ç–∞</label>
                                <input type="text" 
                                       id="workChatId" 
                                       class="form-input" 
                                       placeholder="–í–≤–µ–¥–∏—Ç–µ ID —á–∞—Ç–∞">
                            </div>
                            <div class="d-flex gap-2">
                                <button id="saveChatIdBtn" class="btn btn-primary">
                                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                                </button>
                                <button id="checkChatBtn" class="btn btn-secondary">
                                    –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                                </button>
                            </div>
                            <div id="chatInfo" class="mt-3"></div>
                        </div>
                    </div>
                </div>

                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h2 class="card-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    </div>
                    <div class="card-body">
                        <div id="otherSettings">
                            <p class="text-light">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∑–∞–¥–∞—á -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</h3>
                <button class="close-btn" onclick="TasksModule.hideModal('taskModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <input type="hidden" id="taskId" name="taskId">
                    
                    <div class="form-group">
                        <label class="form-label required">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" 
                               id="taskTitle" 
                               name="title" 
                               class="form-input" 
                               required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="taskDescription" 
                                  name="description" 
                                  class="form-textarea" 
                                  rows="3"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                            <input type="text" 
                                   id="taskAssignee" 
                                   name="assignee" 
                                   class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">–í—Ä–µ–º—è (—á–∞—Å—ã)</label>
                            <input type="number" 
                                   id="taskEstimatedTime" 
                                   name="estimated_time" 
                                   class="form-input" 
                                   min="0" 
                                   step="0.5">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–î–µ–¥–ª–∞–π–Ω</label>
                        <input type="datetime-local" 
                               id="taskDeadline" 
                               name="deadline" 
                               class="form-input">
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" 
                                class="btn btn-secondary" 
                                onclick="TasksModule.hideModal('taskModal')">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="btn btn-primary">
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- JavaScript —Ñ–∞–π–ª—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ -->
    <script src="/js/api.js"></script>
    <script src="/js/tasks.js"></script>
    <script src="/js/users.js"></script>
    <script src="/js/settings.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>